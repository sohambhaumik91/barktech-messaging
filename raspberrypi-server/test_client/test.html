<!DOCTYPE html>
<html>
<body>
<video id="v" autoplay playsinline controls muted></video>

<script>
(async () => {
  const pc = new RTCPeerConnection({
    iceServers: [
      { urls: 'stun:stun.l.google.com:19302' }
    ]
  });

  pc.ontrack = e => {
    document.getElementById('v').srcObject = e.streams[0];
  };

  // Add transceiver to receive video
  pc.addTransceiver('video', { direction: 'recvonly' });

  const offer = await pc.createOffer();
  await pc.setLocalDescription(offer);

  const res = await fetch(
    'https://janette-unplunged-werner.ngrok-free.dev/video/whep',
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/sdp' },
      body: offer.sdp
    }
  );

  const answer = {
    type: 'answer',
    sdp: await res.text()
  };

  await pc.setRemoteDescription(answer);
})();
</script>
</body>
</html>